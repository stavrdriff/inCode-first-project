{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\n  const selectors = {\n    openSelector: 'is-open',\n    bodyBlocked: 'is-blocked',\n    modal: 'modal',\n    modalTrigger: '[data-action=\"modalTrigger\"]',\n    interactiveElements: 'input, button, a, textarea, iframe, select',\n    mobileMenu: 'js-mobile-menu',\n    mobileMenuTrigger: '[data-action=\"mobileMenuTrigger\"]',\n  }\n\n  function initMobileMenu() {\n    const mobileMenu = document.querySelector(`.${selectors.mobileMenu}`);\n    const triggerArr = [...document.querySelectorAll(selectors.mobileMenuTrigger)];\n    const body = document.querySelector('body');\n\n    if (!mobileMenu || !triggerArr.length) {\n      return;\n    }\n\n    triggerArr.forEach((trigger) => {\n      trigger.addEventListener('click', () => {\n        mobileMenu.classList.toggle(selectors.openSelector);\n        body.classList.toggle(selectors.bodyBlocked);\n\n        initModals(selectors.openSelector, selectors.mobileMenu);\n      })\n    })\n  }\n\n  function initModalTriggers() {\n    const buttonsArr = [...document.querySelectorAll(selectors.modalTrigger)];\n\n    if (!buttonsArr.length) {\n      return;\n    }\n\n    buttonsArr.forEach((button, index) => {\n      button.addEventListener('click', () => {\n        modalHandler(button, index, selectors.openSelector);\n        initModals(selectors.openSelector, selectors.modal);\n      })\n    })\n  }\n\n  function modalHandler(trigger, index, modalActiveSelector) {\n    const modals = [...document.querySelectorAll(`.${selectors.modal}`)];\n\n    if (!modals.length) {\n      return;\n    }\n\n    const body = document.querySelector('body');\n\n    body.classList.toggle(selectors.bodyBlocked);\n\n    modals.forEach((modal, i) => {\n      modal.classList.remove(modalActiveSelector);\n\n      if (i == index && !trigger.closest(`.${modalActiveSelector}`)) {\n        modal.classList.add(modalActiveSelector);\n      }\n    })\n  }\n\n  function initModals(modalActiveSelector, modalSelector) {\n    const modals = [...document.querySelectorAll(`.${modalSelector}`)];\n\n    if (!modals.length) {\n      return;\n    }\n\n    modals.forEach((modal) => {\n      const interactiveElements = [...modal.querySelectorAll(selectors.interactiveElements)];\n      const allInteractiveElements = [...document.querySelectorAll(selectors.interactiveElements)];\n      let pageInteractiveElements = [];\n\n      allInteractiveElements.forEach((el) => {\n        if (!el.closest(`.${modalSelector}`)) {\n          pageInteractiveElements.push(el);\n        }\n      })\n\n      tabindexHandler(interactiveElements, modalActiveSelector, pageInteractiveElements)\n    })\n  }\n\n  function tabindexHandler(elements, modalActiveSelector, pageInteractiveElements) {\n    elements.forEach((element) => {\n      if (!element.closest(`.${modalActiveSelector}`)) {\n        element.setAttribute('tabindex', '-1');\n\n        pageInteractiveElements.forEach((element) => {\n          element.setAttribute('tabindex', '0');\n        })\n      } else {\n        element.setAttribute('tabindex', '0');\n\n        pageInteractiveElements.forEach((element) => {\n          element.setAttribute('tabindex', '-1');\n        })\n      }\n    })\n  }\n\n  initMobileMenu();\n  initModalTriggers();\n});"],"names":["selectors","initMobileMenu","mobileMenu","triggerArr","body","trigger","initModals","initModalTriggers","buttonsArr","button","index","modalHandler","modalActiveSelector","modals","modal","i","modalSelector","interactiveElements","allInteractiveElements","pageInteractiveElements","el","tabindexHandler","elements","element"],"mappings":"ssBAAA,SAAS,iBAAiB,mBAAoB,IAAM,CAElD,MAAMA,EAAY,CAChB,aAAc,UACd,YAAa,aACb,MAAO,QACP,aAAc,+BACd,oBAAqB,6CACrB,WAAY,iBACZ,kBAAmB,mCACpB,EAED,SAASC,GAAiB,CACxB,MAAMC,EAAa,SAAS,cAAc,IAAIF,EAAU,YAAY,EAC9DG,EAAa,CAAC,GAAG,SAAS,iBAAiBH,EAAU,iBAAiB,CAAC,EACvEI,EAAO,SAAS,cAAc,MAAM,EAEtC,CAACF,GAAc,CAACC,EAAW,QAI/BA,EAAW,QAASE,GAAY,CAC9BA,EAAQ,iBAAiB,QAAS,IAAM,CACtCH,EAAW,UAAU,OAAOF,EAAU,YAAY,EAClDI,EAAK,UAAU,OAAOJ,EAAU,WAAW,EAE3CM,EAAWN,EAAU,aAAcA,EAAU,UAAU,CAC/D,CAAO,CACP,CAAK,CACF,CAED,SAASO,GAAoB,CAC3B,MAAMC,EAAa,CAAC,GAAG,SAAS,iBAAiBR,EAAU,YAAY,CAAC,EAEnEQ,EAAW,QAIhBA,EAAW,QAAQ,CAACC,EAAQC,IAAU,CACpCD,EAAO,iBAAiB,QAAS,IAAM,CACrCE,EAAaF,EAAQC,EAAOV,EAAU,YAAY,EAClDM,EAAWN,EAAU,aAAcA,EAAU,KAAK,CAC1D,CAAO,CACP,CAAK,CACF,CAED,SAASW,EAAaN,EAASK,EAAOE,EAAqB,CACzD,MAAMC,EAAS,CAAC,GAAG,SAAS,iBAAiB,IAAIb,EAAU,OAAO,CAAC,EAEnE,GAAI,CAACa,EAAO,OACV,OAGW,SAAS,cAAc,MAAM,EAErC,UAAU,OAAOb,EAAU,WAAW,EAE3Ca,EAAO,QAAQ,CAACC,EAAOC,IAAM,CAC3BD,EAAM,UAAU,OAAOF,CAAmB,EAEtCG,GAAKL,GAAS,CAACL,EAAQ,QAAQ,IAAIO,GAAqB,GAC1DE,EAAM,UAAU,IAAIF,CAAmB,CAE/C,CAAK,CACF,CAED,SAASN,EAAWM,EAAqBI,EAAe,CACtD,MAAMH,EAAS,CAAC,GAAG,SAAS,iBAAiB,IAAIG,GAAe,CAAC,EAE5DH,EAAO,QAIZA,EAAO,QAASC,GAAU,CACxB,MAAMG,EAAsB,CAAC,GAAGH,EAAM,iBAAiBd,EAAU,mBAAmB,CAAC,EAC/EkB,EAAyB,CAAC,GAAG,SAAS,iBAAiBlB,EAAU,mBAAmB,CAAC,EAC3F,IAAImB,EAA0B,CAAA,EAE9BD,EAAuB,QAASE,GAAO,CAChCA,EAAG,QAAQ,IAAIJ,GAAe,GACjCG,EAAwB,KAAKC,CAAE,CAEzC,CAAO,EAEDC,EAAgBJ,EAAqBL,EAAqBO,CAAuB,CACvF,CAAK,CACF,CAED,SAASE,EAAgBC,EAAUV,EAAqBO,EAAyB,CAC/EG,EAAS,QAASC,GAAY,CACvBA,EAAQ,QAAQ,IAAIX,GAAqB,GAO5CW,EAAQ,aAAa,WAAY,GAAG,EAEpCJ,EAAwB,QAASI,GAAY,CAC3CA,EAAQ,aAAa,WAAY,IAAI,CAC/C,CAAS,IAVDA,EAAQ,aAAa,WAAY,IAAI,EAErCJ,EAAwB,QAASI,GAAY,CAC3CA,EAAQ,aAAa,WAAY,GAAG,CAC9C,CAAS,EAQT,CAAK,CACF,CAEDtB,IACAM,GACF,CAAC"}