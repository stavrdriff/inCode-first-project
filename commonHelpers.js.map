{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\n  const selectors = {\n    openSelector: 'is-open',\n    bodyBlocked: 'is-blocked',\n    // modal: 'modal',\n    // modalTrigger: '[data-action=\"modalTrigger\"]',\n    interactiveElements: 'input, button, a, textarea, iframe, select',\n    mobileMenu: 'js-mobile-menu',\n    mobileMenuTrigger: '[data-action=\"mobileMenuTrigger\"]',\n  }\n\n  const initMobileMenu = () => {\n    const mobileMenu = document.querySelector(`.${selectors.mobileMenu}`);\n    const triggerArr = [...document.querySelectorAll(selectors.mobileMenuTrigger)];\n    const body = document.querySelector('body');\n\n    if (!mobileMenu || !triggerArr.length) {\n      return;\n    }\n\n    triggerArr.forEach((trigger) => {\n      trigger.addEventListener('click', (event) => {\n        mobileMenu.classList.toggle(selectors.openSelector);\n        body.classList.toggle(selectors.bodyBlocked);\n\n        initModals(selectors.openSelector, selectors.mobileMenu);\n      })\n    })\n  }\n\n  const initModalTriggers = () => {\n    const buttonsArr = [...document.querySelectorAll(selectors.modalTrigger)];\n\n    if (!buttonsArr.length) {\n      return;\n    }\n\n    buttonsArr.forEach((button, index) => {\n      button.addEventListener('click', () => {\n        modalHandler(button, index, selectors.openSelector);\n        initModals(selectors.openSelector, selectors.modal);\n      })\n    })\n  }\n\n  const modalHandler = (trigger, index, modalActiveSelector) => {\n    const modals = [...document.querySelectorAll(`.${selectors.modal}`)];\n\n    if (!modals.length) {\n      return;\n    }\n\n    const body = document.querySelector('body');\n\n    body.classList.toggle(selectors.bodyBlocked);\n\n    modals.forEach((modal, i) => {\n      modal.classList.remove(modalActiveSelector);\n\n      if (i == index && !trigger.closest(`.${modalActiveSelector}`)) {\n        modal.classList.add(modalActiveSelector);\n      }\n    })\n  }\n\n  const initModals = (modalActiveSelector, modalSelector) => {\n    const modals = [...document.querySelectorAll(`.${modalSelector}`)];\n\n    if (!modals.length) {\n      return;\n    }\n\n    modals.forEach((modal) => {\n      const interactiveElements = [...modal.querySelectorAll(selectors.interactiveElements)];\n      const allInteractiveElements = [...document.querySelectorAll(selectors.interactiveElements)];\n      let pageInteractiveElements = [];\n\n      allInteractiveElements.forEach((el) => {\n        if (!el.closest(`.${modalSelector}`)) {\n          pageInteractiveElements.push(el);\n        }\n      })\n\n      tabindexHandler(interactiveElements, modalActiveSelector, pageInteractiveElements)\n    })\n  }\n\n  const tabindexHandler = (elements, modalActiveSelector, pageInteractiveElements) => {\n    elements.forEach((element) => {\n      if (!element.closest(`.${modalActiveSelector}`)) {\n        element.setAttribute('tabindex', '-1');\n\n        pageInteractiveElements.forEach((element) => {\n          element.setAttribute('tabindex', '0');\n        })\n      } else {\n        element.setAttribute('tabindex', '0');\n\n        pageInteractiveElements.forEach((element) => {\n          element.setAttribute('tabindex', '-1');\n        })\n      }\n    })\n  }\n\n  const clickOutsideMenu = () => {\n    window.addEventListener('click', (event) => {\n      const { target } = event;\n      const openedMenu = document.querySelector(`.${selectors.mobileMenu}.${selectors.openSelector}`);\n\n      if (!openedMenu) { return; }\n\n      const closeButton = openedMenu.querySelector(selectors.mobileMenuTrigger);\n      const clickOutsideMenu = !target.closest(`.${selectors.mobileMenu}`)\n      const notTrigger = !target.closest('.burger');\n\n      if (clickOutsideMenu && notTrigger) {\n        closeButton.click();\n      }\n    });\n  }\n\n  // ==================== smooth scroll start =========================== //\n\n  const scrollToTarget = (target) => {\n    const targetElement = document.getElementById(target);\n\n    if (!targetElement) return;\n\n    window.scrollTo({\n      left: 0,\n      behavior: 'smooth',\n      top: targetElement.offsetTop,\n    });\n  };\n\n  const closeMenu = (link) => {\n\n    if (!link) { return; }\n\n    const menu = document.querySelector(`.${selectors.mobileMenu}`);\n    const isOpened = menu.classList.contains(selectors.openSelector);\n\n    if (isOpened) {\n      const closeButton = menu.querySelector(selectors.mobileMenuTrigger);\n\n      closeButton.click();\n    }\n  }\n\n  const initScrollAnchors = () => {\n    const links = [...document.querySelectorAll('[href*=\"#\"]')];\n\n    if (!links.length) return;\n\n    links.forEach((link) => {\n      const target = link.getAttribute('href').split('#', [2]).slice(1);\n\n      if (!target.length) {\n        return;\n      }\n\n      link.addEventListener('click', (event) => {\n        event.preventDefault();\n        scrollToTarget(target);\n        closeMenu(link);\n      });\n    });\n  };\n\n  // ==================== smooth scroll end =========================== //\n\n\n  initScrollAnchors();\n  initMobileMenu();\n  initModalTriggers();\n  clickOutsideMenu();\n});"],"names":["selectors","initMobileMenu","mobileMenu","triggerArr","body","trigger","event","initModals","initModalTriggers","buttonsArr","button","index","modalHandler","modalActiveSelector","modals","modal","i","modalSelector","interactiveElements","allInteractiveElements","pageInteractiveElements","el","tabindexHandler","elements","element","clickOutsideMenu","target","openedMenu","closeButton","notTrigger","scrollToTarget","targetElement","closeMenu","link","menu","links"],"mappings":"ssBAAA,SAAS,iBAAiB,mBAAoB,IAAM,CAElD,MAAMA,EAAY,CAChB,aAAc,UACd,YAAa,aAGb,oBAAqB,6CACrB,WAAY,iBACZ,kBAAmB,mCACpB,EAEKC,EAAiB,IAAM,CAC3B,MAAMC,EAAa,SAAS,cAAc,IAAIF,EAAU,YAAY,EAC9DG,EAAa,CAAC,GAAG,SAAS,iBAAiBH,EAAU,iBAAiB,CAAC,EACvEI,EAAO,SAAS,cAAc,MAAM,EAEtC,CAACF,GAAc,CAACC,EAAW,QAI/BA,EAAW,QAASE,GAAY,CAC9BA,EAAQ,iBAAiB,QAAUC,GAAU,CAC3CJ,EAAW,UAAU,OAAOF,EAAU,YAAY,EAClDI,EAAK,UAAU,OAAOJ,EAAU,WAAW,EAE3CO,EAAWP,EAAU,aAAcA,EAAU,UAAU,CAC/D,CAAO,CACP,CAAK,CACF,EAEKQ,EAAoB,IAAM,CAC9B,MAAMC,EAAa,CAAC,GAAG,SAAS,iBAAiBT,EAAU,YAAY,CAAC,EAEnES,EAAW,QAIhBA,EAAW,QAAQ,CAACC,EAAQC,IAAU,CACpCD,EAAO,iBAAiB,QAAS,IAAM,CACrCE,EAAaF,EAAQC,EAAOX,EAAU,YAAY,EAClDO,EAAWP,EAAU,aAAcA,EAAU,KAAK,CAC1D,CAAO,CACP,CAAK,CACF,EAEKY,EAAe,CAACP,EAASM,EAAOE,IAAwB,CAC5D,MAAMC,EAAS,CAAC,GAAG,SAAS,iBAAiB,IAAId,EAAU,OAAO,CAAC,EAEnE,GAAI,CAACc,EAAO,OACV,OAGW,SAAS,cAAc,MAAM,EAErC,UAAU,OAAOd,EAAU,WAAW,EAE3Cc,EAAO,QAAQ,CAACC,EAAOC,IAAM,CAC3BD,EAAM,UAAU,OAAOF,CAAmB,EAEtCG,GAAKL,GAAS,CAACN,EAAQ,QAAQ,IAAIQ,GAAqB,GAC1DE,EAAM,UAAU,IAAIF,CAAmB,CAE/C,CAAK,CACF,EAEKN,EAAa,CAACM,EAAqBI,IAAkB,CACzD,MAAMH,EAAS,CAAC,GAAG,SAAS,iBAAiB,IAAIG,GAAe,CAAC,EAE5DH,EAAO,QAIZA,EAAO,QAASC,GAAU,CACxB,MAAMG,EAAsB,CAAC,GAAGH,EAAM,iBAAiBf,EAAU,mBAAmB,CAAC,EAC/EmB,EAAyB,CAAC,GAAG,SAAS,iBAAiBnB,EAAU,mBAAmB,CAAC,EAC3F,IAAIoB,EAA0B,CAAA,EAE9BD,EAAuB,QAASE,GAAO,CAChCA,EAAG,QAAQ,IAAIJ,GAAe,GACjCG,EAAwB,KAAKC,CAAE,CAEzC,CAAO,EAEDC,EAAgBJ,EAAqBL,EAAqBO,CAAuB,CACvF,CAAK,CACF,EAEKE,EAAkB,CAACC,EAAUV,EAAqBO,IAA4B,CAClFG,EAAS,QAASC,GAAY,CACvBA,EAAQ,QAAQ,IAAIX,GAAqB,GAO5CW,EAAQ,aAAa,WAAY,GAAG,EAEpCJ,EAAwB,QAASI,GAAY,CAC3CA,EAAQ,aAAa,WAAY,IAAI,CAC/C,CAAS,IAVDA,EAAQ,aAAa,WAAY,IAAI,EAErCJ,EAAwB,QAASI,GAAY,CAC3CA,EAAQ,aAAa,WAAY,GAAG,CAC9C,CAAS,EAQT,CAAK,CACF,EAEKC,EAAmB,IAAM,CAC7B,OAAO,iBAAiB,QAAUnB,GAAU,CAC1C,KAAM,CAAE,OAAAoB,CAAQ,EAAGpB,EACbqB,EAAa,SAAS,cAAc,IAAI3B,EAAU,cAAcA,EAAU,cAAc,EAE9F,GAAI,CAAC2B,EAAc,OAEnB,MAAMC,EAAcD,EAAW,cAAc3B,EAAU,iBAAiB,EAClEyB,EAAmB,CAACC,EAAO,QAAQ,IAAI1B,EAAU,YAAY,EAC7D6B,EAAa,CAACH,EAAO,QAAQ,SAAS,EAExCD,GAAoBI,GACtBD,EAAY,MAAK,CAEzB,CAAK,CACF,EAIKE,EAAkBJ,GAAW,CACjC,MAAMK,EAAgB,SAAS,eAAeL,CAAM,EAE/CK,GAEL,OAAO,SAAS,CACd,KAAM,EACN,SAAU,SACV,IAAKA,EAAc,SACzB,CAAK,CACL,EAEQC,EAAaC,GAAS,CAE1B,GAAI,CAACA,EAAQ,OAEb,MAAMC,EAAO,SAAS,cAAc,IAAIlC,EAAU,YAAY,EAC7CkC,EAAK,UAAU,SAASlC,EAAU,YAAY,GAGzCkC,EAAK,cAAclC,EAAU,iBAAiB,EAEtD,MAAK,CAEpB,GAEyB,IAAM,CAC9B,MAAMmC,EAAQ,CAAC,GAAG,SAAS,iBAAiB,aAAa,CAAC,EAErDA,EAAM,QAEXA,EAAM,QAASF,GAAS,CACtB,MAAMP,EAASO,EAAK,aAAa,MAAM,EAAE,MAAM,IAAK,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,EAE3DP,EAAO,QAIZO,EAAK,iBAAiB,QAAU3B,GAAU,CACxCA,EAAM,eAAc,EACpBwB,EAAeJ,CAAM,EACrBM,EAAUC,CAAI,CACtB,CAAO,CACP,CAAK,CACL,KAMEhC,IACAO,IACAiB,GACF,CAAC"}